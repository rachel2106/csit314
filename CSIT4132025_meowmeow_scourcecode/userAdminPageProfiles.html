import { Firebase } from "./firebaseAuth.js";
const firebase = new Firebase();

class HMLoginController {
  constructor(formId) {
    this.formId = formId;
    this.form = document.getElementById(this.formId);
    this.form.addEventListener('submit', (event) => this.handleLogin(event));
  }

  // Handle login
  async handleLogin(event) {
    event.preventDefault();
    
    const email = this.form.querySelector("#email").value;
    const password = this.form.querySelector("#password").value;

    try {
      const user = await firebase.login(email, password);
      console.log("User logged in:", user);
      
      // After successful login, you can redirect to the dashboard or display user data
      window.location.href = "/HMViewAllCS.html";  // Redirect to the homeowner dashboard or relevant page
    } catch (error) {
      alert("Login failed: " + error.message);
    }
  }
}

// Instantiate the controller for handling login form submission
const loginController = new HMLoginController("loginFormId"); // Replace with your actual form ID
